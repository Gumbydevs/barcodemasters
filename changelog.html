<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barcode Masters Change Log</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            color: #333;
            margin: 0;
            padding: 0;
        }
        .container {
            width: 80%;
            margin: 2rem auto;
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        h2 {
            font-size: 1.5rem;
            color: #007BFF;
            margin-top: 1.5rem;
        }
        ul {
            list-style-type: disc;
            margin-left: 2rem;
        }
        li {
            margin-bottom: 0.75rem;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Barcode Masters Change Log</h1>
    
    <h2>Changelog for January 10, 2024</h2>
    <h3>Added</h3>
    <ul>
        <li><strong>Battle System Enhancements:</strong>
            <ul>
                <li>Added critical hit system with visual effects and multiplier damage</li>
                <li>Implemented emoji-based visual response system for battle actions</li>
                <li>Created battle matchup preview card system before battle initiation</li>
                <li>Enhanced battle balance with adjusted damage calculations</li>
            </ul>
        </li>
        <li><strong>Monster Stat Training Duration System:</strong> A new function was introduced to calculate stat training duration based on the monster's current stat value. This function uses exponential growth for the training time (1.15^(stat/5)) and includes random variation. For example:
            <ul>
                <li>Monster Stats 0-5: 15-30 seconds stat training time (± random variation)</li>
                <li>Monster Stats 5-10: 1-2 minutes stat training time (± random variation)</li>
                <li>Monster Stats 10-30: Linear stat training progression (with maximum cap at 4 hours for stats 100+)</li>
                <li>Monster Stats 30-60+: Stat training time grows up to 8 hours, with increasing times for higher stats</li>
            </ul>
        </li>
        <li><strong>Monster Stat Training Progress Persistence:</strong> Stat training state is stored in localStorage, allowing monster training progress to persist across sessions. The stat training resumes automatically after page reloads, navigation, or even after logging out.</li>
        <li><strong>Improved Monster Training UI Flow:</strong> The stat training progress bar and timer now display the dynamically calculated training duration. Stat training time is updated in real-time, and the UI is properly restored when returning to the page during ongoing monster training.</li>
    </ul>

    <h3>Updated</h3>
    <ul>
        <li><strong>Monster Stat Training Time Display:</strong> The training time display now includes seconds, with updates every 100ms for smoother countdowns. The format is as follows:
            <ul>
                <li>"Xs" for stat training times under a minute</li>
                <li>"Xm Ys" for stat training times under an hour</li>
                <li>"Xh Ym Zs" for stat training durations of hours or more</li>
            </ul>
        </li>
        <li><strong>Improved Formatting for Longer Training Durations:</strong> Added better time formatting for longer stat training durations (more than 1 hour). This includes training time for monster stats 50 and above, with the expected stat training times now shown more accurately.</li>
    </ul>

    <h3>Fixed</h3>
    <ul>
        <li><strong>Monster Training Section Visibility:</strong> Ensured that the stat training section is visible when resuming monster training, even after a page reload.</li>
        <li><strong>Training UI Restoration:</strong> Fixed issues related to restoring the monster stat training UI state properly when returning to the page.</li>
        <li><strong>Handling User Actions During Monster Training:</strong> Improved handling of page refreshes, navigation, and even logging out, so the monster stat training state persists and resumes correctly.</li>
    </ul>

    <h3>Known Issues</h3>
    <ul>
        <li><strong>Monster Stat Training Time Randomization:</strong> The ±15% random variation applied to stat training times for monster stats 0-5 and 5-10 may lead to slightly inconsistent training times, though this variation helps simulate more realistic training scenarios.</li>
        <li><strong>Cross-Device Training Persistence:</strong> Currently, monster training progress is stored in localStorage, which means training sessions cannot persist across multiple devices. This will be addressed in a future update by moving to database storage for full cross-device persistence.</li>
    </ul>

    <h2>Changelog for January 9, 2024</h2>
    <h3>Added</h3>
    <ul>
        <li>Basic Battle System.</li>
        <li>Created a mock up battle page and system with basic battle feedback, functions, attack, defend, heal.</li>
        <li>Initialized and configured backend database to support battle functionality.</li>
        <li>Implemented basic Ai opponent with random actions.</li>
        <li>Created updateMonsterExperience function to manage XP changes during battles.</li>
        <li>Added a weighted action system for AI opponents (70% attack, 20% heal, 10% defend) on the battle page.</li>
        <li>Implemented experience feedback in the battle log for clearer progress tracking.</li>
    </ul>

    <h3>Fixed</h3>
    <ul>
        <li>Resolved issues with defending functionality, ensuring damage is properly halved during battles.</li>
        <li>Corrected win/lose logic by ensuring health updates are accurately checked after each turn.</li>
        <li>Tweaked opponent health management to improve battle outcomes and ensure smoother gameplay.</li>
    </ul>

    <h3>Updated</h3>
    <ul>
        <li>Modified healing logic on the battle page to heal 20% of max HP, improving both AI and player healing mechanisms.</li>
        <li>Enhanced battle log messages to display actual healing amounts, making feedback more informative.</li>
        <li>Improved dark mode styling for the battle container, including mobile-specific adjustments for better visibility.</li>
        <li>Refined the user experience on mobile with adjustments to padding, opacity, and contrast for the battle log.</li>
    </ul>

    <h3>Moved</h3>
    <ul>
        <li>Repositioned the "Back to Profile" button for better user navigation during battles.</li>
    </ul>

    <h3>Changed</h3>
    <ul>
        <li>Major formatting updates for the monster selection and battle initiation screens, addressing some defending action issues.</li>
        <li>Improved consistency in background colors between mobile and desktop versions for a cohesive visual experience.</li>
    </ul>

    <hr style="margin: 2rem 0;">

    <h2>First Live Version 1.0.03 - Alpha Development Release</h2>
    <ul>
        <li><strong>First commit</strong>: Basic project setup with main page structure and initial files.</li>
    </ul>

    <h2>Version Updates & Bug Fixes</h2>
    <ul>
        <li><strong>V6</strong> of the DNA Extractor/Monster Generator released, incorporating improvements in dynamic monster generation for name generation, stats, monster types.</li>
        <ul>
            <li>Generates unique monsters based on barcode hash seeds.</li>
            <li>Moved monster types definitions to the database for scalability.</li>
            <li>Generator now pulls monster type from the database which are randomized by code seed.</li>
            <li>Stats are generated within speciified clamped ranges and influenced by code seed + unique monster type stat modifiers.</li>
            <li>Duplicate code scans detection, codes can be scanned once per user if the monster exists in their collection.</li>
            <li>Monsters now correctly saving to user's collection.</li>
        </ul>
        <p></p>
        <li><strong>Version Number Updates</strong> across multiple pages for consistency and better version tracking.</li>
        <li><strong>Debugging Issues Resolved</strong>: Fixes applied for Firebase connections, user login, and database interactions. Debug logs improved for tracking errors.</li>
        <li><strong>Favicon and Branding Updates</strong>: Fixed favicon across all pages and updated branding elements for consistency.</li>
        <li><strong>Mobile & Desktop Adjustments</strong>: Implemented responsive design fixes to ensure seamless user experience across both mobile and desktop devices.</li>
    </ul>

    <h2>Monster Management & Admin Tools</h2>
    <ul>
        <li><strong>Dynamic Monster Generation</strong>: Enhanced with the ability to pull data from the database, allowing for dynamic creation of monsters based on barcode input and seeds.</li>
        <li><strong>Admin Tool for Managing Monster Types</strong>: Admin interface created for managing monster types, including bug fixes and UI improvements for easier navigation and updates.</li>
        <li><strong>Unique Monster Stats & Barcode Seeds</strong>: Integrated barcode seed functionality, allowing each monster to have stats and traits based on unique barcode hashes.</li>
        <li><strong>Monster Collection Page</strong>: Improved UI for managing monsters, including options for renaming, deleting, and updating monster stats. Enhanced sorting and filtering functionalities.</li>
        <li><strong>Global Monster Index Page</strong>: Improved UI for viewing all monsters in the game, displaying their info and owner with search and filter options for exploring the full monster collection.</li>
        <li><strong>Database Setup for Monster Data</strong>: Refined database structure to handle monster data more efficiently, including creating unique IDs for each monster and associating them with player accounts.</li>
    </ul>

    <h2>Training & Battle System</h2>
    <ul>
        <li><strong>Training Page Layout & Functionality</strong>: Further refinement of the training system, with clearer dropdowns and better alignment for stat selection.</li>
        <li><strong>Stat Increase Mechanism</strong>: Integrated logic to adjust monster stats based on training results, factoring in monster types and training duration.</li>
        <li><strong>Battle System Development</strong>: Progress on turn-based battle mechanics, with initial implementation of randomized events to keep battles engaging and unpredictable.</li>
    </ul>

    <h2>Login & User Authentication</h2>
    <ul>
        <li><strong>Firebase User Authentication</strong>: Integrated Firebase for user registration and login, including handling user IDs and ensuring secure database connections for user-specific data.</li>
        <li><strong>Unique User IDs</strong>: Each player now receives a unique user ID upon registration, enabling personalized gameplay and monster collection.</li>
        <li><strong>QR Code Generation</strong>: QR code feature added to allow players to share monster details or collections with others via unique barcode QR codes.</li>
    </ul>

    <h2>Permissions & Security</h2>
    <ul>
        <li><strong>Camera Permissions</strong>: Fixed issues related to camera permissions for barcode scanning, ensuring the camera works consistently across different devices and browsers.</li>
        <li><strong>Permissions Management</strong>: Improved permission handling for accessing device hardware, including adding error messages for users who deny camera access.</li>
    </ul>

    <h2>User Interface & Style</h2>
    <ul>
        <li><strong>Dark Mode Enhancements</strong>: Refinement of dark mode styling, ensuring consistent user interface behavior across various pages.</li>
        <li><strong>Button & Link Styling</strong>: Update of button styles, including alignment and enhanced functionality for the DNA Extractor tool and player profile page.</li>
        <li><strong>Help Pages & Tooltips</strong>: Updated help texts and tooltips across the site, adding clearer instructions for new users. A new help button was added to the login page for improved guidance.</li>
    </ul>

    <h2>Miscellaneous Enhancements</h2>
    <ul>
        <li><strong>Monster Type Modifiers</strong>: Additional logic added for modifying monster stats based on type, with different effects based on the monster’s unique barcode hash.</li>
        <li><strong>Database Cleanup</strong>: Overhaul of database setup, including cleaning up redundant data and optimizing for faster query execution related to player and monster data.</li>
        <li><strong>Debugging Tools</strong>: Added more detailed debugging toggles to help troubleshoot issues with player data, monster generation, and database syncing.</li>
        <li><strong>New Barcode Libraries</strong>: Added new barcode scanning libraries to improve the accuracy and speed of barcode recognition, supporting more formats.</li>
    </ul>
    <div class="navigation-grid">
        <button class="nav-button" onclick="location.href='profile.html'">Back to game!</button>
    </div>
</div>

</body>
</html>
